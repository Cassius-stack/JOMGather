{% extends "base.html" %}

{% block title %}Request Help - MySavvyGranny{% endblock %}

{% block content %}
<!-- TODO: Team member to implement support swap request page -->
<div class="container">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Swap - Feature Skeleton</title>
    <style>
        /* Basic Layout & CSS */
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background-color: #f5f7fa; color: #333; }
        
        /* Navigation Bar */
        header { background-color: #0056b3; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; }
        .nav-links button { background: none; border: none; color: white; font-size: 16px; margin-left: 15px; cursor: pointer; padding-bottom: 5px; }
        .nav-links button:hover { text-decoration: underline; }
        
        /* Container */
        main { max-width: 900px; margin: 20px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); min-height: 600px;}
        
        /* Stats Bar (VIA/Coins) */
        .profile-bar { display: flex; justify-content: space-between; background: #eef2f7; padding: 10px 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #dde1e6; }
        .stat-item { font-weight: bold; color: #555; }
        .stat-value { color: #0056b3; }

        /* Sections (Tabs) */
        .feature-section { display: none; } /* Hidden by default */
        .feature-section.active { display: block; } /* Visible when active */

        /* Cards (Requests/Matches) */
        .card { border: 1px solid #eee; padding: 15px; margin-bottom: 15px; border-radius: 6px; position: relative; }
        .card h4 { margin-top: 0; color: #0056b3; }
        .card-meta { font-size: 0.9em; color: #666; margin-bottom: 10px; }
        .tag { display: inline-block; background: #e0e0e0; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; margin-right: 5px; }
        
        /* Buttons */
        .btn { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-disabled { background-color: #ccc; cursor: not-allowed; color: #666; }

        /* Form Styling */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
    </style>
</head>
<body>

    <header>
        <div><strong>Support Swap</strong> <small>(North Region)</small></div>
        <div class="nav-links">
            <button onclick="switchTab('market')">Skills Market</button>
            <button onclick="switchTab('post')">+ Post Request</button>
            <button onclick="switchTab('history')">History & Matches</button>
        </div>
    </header>

    <main>
        <div class="profile-bar">
            <div>User: Jeremy Khoo (Youth)</div>
            <div>
                <span class="stat-item">VIA Hours: <span class="stat-value">12.5</span></span> | 
                <span class="stat-item">Coins: <span class="stat-value">50</span></span>
            </div>
        </div>

        <div id="market" class="feature-section active">
            <h3>Available Requests (North Region)</h3>
            <p style="color:#666; font-size:0.9em;">Requests near Yishun/Woodlands Community Centres based on your Singpass address.</p>
            <hr>

            <div class="card">
                <div style="float:right; color:green; font-size:0.8em;">Match Found</div>
                <h4>Request: Write a Letter</h4>
                <div class="card-meta">
                    <strong>Requester:</strong> Elderly (Madam Lee)<br>
                    <strong>Location:</strong> Yishun Community Centre<br>
                    <strong>Skill Needed:</strong> Writing an Email
                </div>
                <p>I need help writing an email to my grandson in Australia.</p>
                <div style="margin-top:10px;">
                    <span class="tag">English Literacy</span>
                    <span class="tag">Writing</span>
                </div>
                <br>
                <button class="btn btn-primary" onclick="alert('System Action: Match Created!\nAdded to your History.')">Accept Help Request</button>
            </div>

            <div class="card" style="background-color: #fff5f5;">
                <div style="float:right; color:red; font-size:0.8em;">Skill Mismatch</div>
                <h4>Request: Fix Vintage TV</h4>
                <div class="card-meta">
                    <strong>Requester:</strong> Elderly (Mr. Tan)<br>
                    <strong>Location:</strong> Woodlands Community Centre<br>
                    <strong>Skill Needed:</strong> Electronics Repair
                </div>
                <p>My old TV stopped working, looking for someone with tools.</p>
                <div style="margin-top:10px;">
                    <span class="tag">Electronics</span>
                    <span class="tag">Repair</span>
                </div>
                <br>
                <button class="btn btn-disabled" onclick="alert('Error: You do not have [Electronics] listed in your profile skills.')">Accept Help Request</button>
            </div>
        </div>

        <div id="post" class="feature-section">
            <h3>Post a New Request</h3>
            <form onsubmit="event.preventDefault(); alert('Request Posted!\nSaved to [My Requested] list.'); switchTab('history');">
                <div class="form-group">
                    <label>Topic</label>
                    <input type="text" placeholder="e.g., Gardening, Fixing a Bike, Learning Dialect" required>
                </div>

                <div class="form-group">
                    <label>Request Type</label>
                    <select>
                        <option>I want to Learn (Youth seeking Elderly)</option>
                        <option>I need Help (Elderly seeking Youth)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea rows="4" placeholder="Describe what you need help with or want to learn..."></textarea>
                </div>

                <div class="form-group">
                    <label>Logistics (Time & Duration)</label>
                    <div style="display:flex; gap:10px;">
                        <input type="datetime-local">
                        <input type="number" placeholder="Hours" style="width:100px;">
                    </div>
                    <small style="color:gray">Location defaults to your Singpass registered district (North).</small>
                </div>

                <button type="submit" class="btn btn-success">Submit Request</button>
            </form>
        </div>

        <div id="history" class="feature-section">
            <h3>Activity History</h3>

            <h4>Upcoming Matches (Accepted)</h4>
            <div class="card" id="matchCard1">
                <h4>Match: Speaking Cantonese</h4>
                <div class="card-meta">
                    <strong>Partner:</strong> Uncle Chan (Elderly)<br>
                    <strong>Status:</strong> Confirmed<br>
                    <strong>Where:</strong> Yishun CC, Room 3
                </div>
                
                <div style="background:#f9f9f9; padding:10px; border-radius:5px; margin-top:10px;">
                    <label style="font-size:0.8em;"><strong>Slice of Life (Feedback):</strong></label>
                    <input type="text" placeholder="What did you learn today?" style="width:100%; margin-bottom:5px; padding:5px;">
                    <button class="btn btn-success" style="font-size:12px;">Submit & Claim Points</button>
                </div>

                <br>
                <button class="btn btn-danger" onclick="deleteItem('matchCard1')">Delete / Cancel Match</button>
            </div>

            <hr>

            <h4>My Posted Requests</h4>
            <div class="card" id="reqCard1">
                <h4>Topic: Learn Planting/Gardening</h4>
                <div class="card-meta">
                    <strong>Status:</strong> Pending Acceptance<br>
                    <strong>Posted:</strong> 2 hours ago
                </div>
                <button class="btn btn-danger" onclick="deleteItem('reqCard1')">Delete Request</button>
            </div>
        </div>

    </main>

    <script>
        // Simple Logic to switch tabs
        function switchTab(tabId) {
            // Hide all sections
            document.querySelectorAll('.feature-section').forEach(section => {
                section.classList.remove('active');
            });
            // Show selected section
            document.getElementById(tabId).classList.add('active');
        }

        // Mock Delete Function
        function deleteItem(id) {
            if(confirm('Are you sure you want to DELETE this item?')) {
                document.getElementById(id).style.display = 'none';
            }
        }
    </script>

</body>
</div>
{% endblock %}